{
  "hash": "8743e80b7c39ca0e8fb200dc683799c0",
  "result": {
    "engine": "knitr",
    "markdown": "---\nauthor: \"Garrett Grolemund\"\n---\n\n# Packages and more dice\n\nWe now have code that allows us to roll two dice and add the results together. \nTo keep things interesting, let's aim to weight the dice so that we can fool\nour friends into thinking we are lucky.\n\nFirst, though, we should prove to ourselves that our dice are fair. We can investigate\nthe behavior of our dice using two powerful and general tools;\n\n- Simulation (or repetition or repeated sampling)\n- Visualization\n\nFor the repetition part of things, we will use a built-in R function, `replicate`. \nFor visualization, we are going to use a convenient plotting function, `qplot`. However,\n`qplot` does not come built into R. We must install a _package_ to gain access to it.\n\n\n## Packages\n\nR is a powerful language for data science and programming, allowing beginners\nand experts alike to manipulate, analyze, and visualize data effectively. One\nof the most appealing features of R is its extensive library of packages, which\nare essential tools for expanding its capabilities and streamlining the coding\nprocess.\n\nAn R package is a collection of reusable functions, datasets, and compiled code\ncreated by other users and developers to extend the functionality of the base R\nlanguage. These packages cover a wide range of applications, such as data\nmanipulation, statistical analysis, machine learning, and data visualization.\nBy utilizing existing R packages, you can leverage the expertise of others and\nsave time by avoiding the need to create custom functions from scratch.\n\nUsing others' R packages is incredibly beneficial as it allows you to take\nadvantage of the collective knowledge of the R community. Developers often\ncreate packages to address specific challenges, optimize performance, or\nimplement popular algorithms or methodologies. By incorporating these packages\ninto your projects, you can enhance your productivity, reduce development time,\nand ensure that you are using well-tested and reliable code.\n\n### Installing R packages\n\nTo install an R package, you can use the `install.packages()` function in the R\nconsole or script. For example, to install the popular data manipulation\npackage \"dplyr,\" simply type install.packages(\"dplyr\"). This command will\ndownload the package from the Comprehensive R Archive Network (CRAN) and\ninstall it on your local machine. Keep in mind that you only need to install a\npackage once, unless you want to update it to a newer version.\n\nFor those who are going to be using R for bioinformatics or biological data\nscience, you will also want to install packages from Bioconductor, which is a\nrepository of R packages specifically designed for bioinformatics and\ncomputational biology. To install Bioconductor packages, you can use the\n`BiocManager::install()` function. \n\nTo use this recommended approach, you first need to install the\n`BiocManager` package, which is the package manager for Bioconductor. \n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages('BiocManager')\n```\n:::\n\n\nThis is a one-time installation. After that, you can install any R, Bioconductor, rOpenSci, or even GitHub package using the `BiocManager::install()` function. For example, to install the `ggplot2` package, which is widely used for data visualization, you would run:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nBiocManager::install(\"ggplot2\")\n```\n:::\n\n\n### Installing vs loading (library) R packages\n\nAfter installing an R package, you will need to load it into your R session\nbefore using its functions. To load a package, use the `library()` function\nfollowed by the package name, such as `library(dplyr)`. Loading a package makes\nits functions and datasets available for use in your current R session. Note\nthat you need to load a package every time you start a new R session.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\n```\n:::\n\n\nNow, the functionality of the _ggplot2_ package is available in our R session.\n\n\n::: {.callout-tip}\n## Installing vs loading packages\n\nThe main thing to remember is that you only need to install a package once, but you need to load it with library each time you wish to use it in a new R session. R will unload all of its packages each time you close RStudio.\n\n![Installing vs loading R packages.](https://hbctraining.github.io/Intro-to-R-flipped/img/install_vs_library.jpeg){#fig-install-vs-library}\n\nAs in {@fig-install-vs-library}, screw in the lightbulb (eg., `BiocManager::install`) only once and then to use it, you need to turn on the switch each time you want to use it (`library`).\n\n:::\n\n### Finding R packages\n\nFinding useful R packages can be done in several ways. First, browsing CRAN\n(<https://cran.r-project.org/>) and Bioconductor (more later,\n<https://bioconductor.org>) are an excellent starting points, as they host\nthousands of packages categorized by topic. Additionally, online forums like\nStack Overflow and R-bloggers can provide valuable recommendations based on\nuser experiences. Social media platforms such as Twitter, where developers and\ndata scientists often share new packages and updates, can also be a helpful\nresource. Finally, don't forget to ask your colleagues or fellow R users for\ntheir favorite packages, as they may have insights on which ones best suit your\nspecific needs.\n\n## Are our dice fair?\n\nWell, let's review our code.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nroll2 <- function(bones = 1:6) {\n  dice = sample(bones, size = 2, replace = TRUE)\n  sum(dice)\n}\n```\n:::\n\n\nIf our dice are fair, then each number should show up equally. What does the sum look\nlike with our two dice?\n\n![In an ideal world, a histogram of the results would look like this](images/dice_combos.png){#fig-dice-combos}\n\nRead the help page for `replicate` (i.e., `help(\"replicate\")`). In short, it suggests\nthat we can repeat our dice rolling as many times as we like and replicate will return\na _vector_ of the sums for each roll.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrolls = replicate(n = 100, roll2())\n```\n:::\n\n\nWhat does `rolls` look like?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(rolls)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]  4  7  5 11  7  8\n```\n\n\n:::\n\n```{.r .cell-code}\nlength(rolls)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 100\n```\n\n\n:::\n\n```{.r .cell-code}\nmean(rolls)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 7.03\n```\n\n\n:::\n\n```{.r .cell-code}\nsummary(rolls)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n   2.00    5.00    7.00    7.03    9.00   12.00 \n```\n\n\n:::\n:::\n\n\nThis looks like it roughly agrees with our sketched out ideal histogram in @fig-dice-combos. However, now that we've loaded the `qplot` function from the _ggplot2_ package, we can make a histogram of the data themselves. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nqplot(rolls, binwidth=1)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: `qplot()` was deprecated in ggplot2 3.4.0.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![Histogram of the sums from 100 rolls of our fair dice](packages_and_dice_files/figure-pdf/fig-100-rolls-1.pdf){#fig-100-rolls fig-pos='H'}\n:::\n:::\n\n\nHow does your histogram look (and yours will be different from mine since we are sampling random values)? Is it what you expect? \n\nWhat happens to our histogram as we increase the number of replicates?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrolls = replicate(n = 100000, roll2())\nqplot(rolls, binwidth=1)\n```\n\n::: {.cell-output-display}\n![Histogram with 100000 rolls much more closely approximates the pyramidal shape we anticipated](packages_and_dice_files/figure-pdf/fig-10k-rolls-1.pdf){#fig-10k-rolls fig-pos='H'}\n:::\n:::\n\n\n## Bonus exercise\n\nHow would you change the `roll2` function to weight the dice? \n\n::: {.callout-note}\n## Hint\nRead the help page for `sample` (i.e., `help(\"sample\")`). \n::: \n",
    "supporting": [
      "packages_and_dice_files/figure-pdf"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{},\"value\":[]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}